---
import { getCollection, render } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import Prose from '@/components/prose.astro';
import Breadcrumbs from '@/components/shared/breadcrumbs.astro';
import BaseLayout from '@/layouts/base-layout.astro';
import { TypographyH1, TypographyP } from '@/components/shared/typography';

export interface Props {
    pick: CollectionEntry<'topPicks'>;
}

export const getStaticPaths = async () => {
    const topPicks = await getCollection('topPicks');
    return topPicks.map(pick => ({
        params: { slug: pick.data.slug },
        props: { pick }
    }));
};

const { pick } = Astro.props;
const { Content } = await render(pick);
---

<BaseLayout title={`${pick.data.title}`}>
    <article class="flex flex-col gap-2">
        <TypographyH1>{pick.data.title}</TypographyH1>
        <Breadcrumbs />
        <TypographyP className="lead">{pick.data.content}</TypographyP>
        <Prose>
            <Content />
        </Prose>
    </article>
</BaseLayout>
