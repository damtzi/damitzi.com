---
import { getCollection, render } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import Prose from '@/components/prose.astro';
import Breadcrumbs from '@/components/shared/breadcrumbs.astro';
import BaseLayout from '@/layouts/base-layout.astro';
import { TypographyH1, TypographyP } from '@/components/shared/typography';

export interface Props {
    recipe: CollectionEntry<'recipes'>;
}

export const getStaticPaths = async () => {
    const recipes = await getCollection('recipes');
    return recipes.map(recipe => ({
        params: { slug: recipe.data.slug },
        props: { recipe }
    }));
};

const { recipe } = Astro.props;
const { Content } = await render(recipe);
---

<BaseLayout title={`${recipe.data.title}`}>
    <article class="flex flex-col gap-2">
        <TypographyH1>{recipe.data.title}</TypographyH1>
        <Breadcrumbs />
        <TypographyP className="lead">{recipe.data.content}</TypographyP>
        <Prose>
            <Content />
        </Prose>
    </article>
</BaseLayout>
